# API Documentation - Price Monitor Bot

## üìä –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ü–µ–Ω—ã

### GET `/api/sku/<article>/daily`
–ü–æ–ª—É—á–∞–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—É—é —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `article` - –∞—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "article": "33069284",
  "price": "1,503",
  "source": "Selenium",
  "created_at": "2025-10-17 10:30:00",
  "product_name": "–¢–æ–≤–∞—Ä 33069284"
}
```

### GET `/api/daily/today`
–ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Ü–µ–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å.

**–û—Ç–≤–µ—Ç:**
```json
{
  "date": "2025-10-17",
  "prices": [
    {
      "article": "33069284",
      "product_name": "–¢–æ–≤–∞—Ä 33069284",
      "price": "1,503",
      "source": "Selenium",
      "created_at": "2025-10-17 10:30:00"
    }
  ]
}
```

### POST `/api/sku/<article>/force-update`
–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∫—ç—à).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `article` - –∞—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "article": "33069284",
  "price": "1,503",
  "source": "Selenium",
  "updated_at": "2025-10-17 10:30:00",
  "status": "success"
}
```

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### GET `/api/stats`
–ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏—Å—Ç–µ–º—ã.

**–û—Ç–≤–µ—Ç:**
```json
{
  "total_skus": 15,
  "active_user_skus": 8,
  "unique_users": 3,
  "price_records": 45,
  "daily_price_records": 12,
  "today_records": 5
}
```

## üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### GET `/api/user/<user_id>/skus`
–ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram

**–û—Ç–≤–µ—Ç:**
```json
{
  "user_id": "123456789",
  "skus": [
    {
      "article": "33069284",
      "product_name": "–¢–æ–≤–∞—Ä 33069284",
      "current_price": "1,503",
      "price_source": "Selenium",
      "last_updated": "2025-10-17 10:30:00",
      "product_url": "https://www.ozon.ru/product/33069284/",
      "added_at": "2025-10-17 09:15:00"
    }
  ]
}
```

## üõçÔ∏è –¢–æ–≤–∞—Ä—ã

### GET `/api/sku/<article>`
–ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `article` - –∞—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "article": "33069284",
  "product_name": "–¢–æ–≤–∞—Ä 33069284",
  "current_price": "1,503",
  "price_source": "Selenium",
  "last_updated": "2025-10-17 10:30:00",
  "product_url": "https://www.ozon.ru/product/33069284/",
  "created_at": "2025-10-17 09:15:00"
}
```

### GET `/api/sku/<article>/history`
–ü–æ–ª—É—á–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Ü–µ–Ω —Ç–æ–≤–∞—Ä–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `article` - –∞—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "article": "33069284",
  "history": [
    {
      "price": "1,503",
      "source": "Selenium",
      "recorded_at": "2025-10-17 10:30:00"
    }
  ]
}
```

## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å** —Ç–æ–≤–∞—Ä–∞ –∑–∞ –¥–µ–Ω—å - –ø–æ–ª—É—á–∞–µ–º —Ü–µ–Ω—É —Å Ozon.ru –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
2. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** —Ç–æ–≥–æ –∂–µ —Ç–æ–≤–∞—Ä–∞ –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ü–µ–Ω—É
3. **–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å** - —Å–Ω–æ–≤–∞ –ø–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- üü¢ **"–î–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞"** - —Ü–µ–Ω–∞ –ø–æ–ª—É—á–µ–Ω–∞ —Ä–∞–Ω–µ–µ —Å–µ–≥–æ–¥–Ω—è
- üü° **"–¶–µ–Ω–∞ –ø–æ–ª—É—á–µ–Ω–∞ —Å–µ–π—á–∞—Å"** - —Ç–æ–ª—å–∫–æ —á—Ç–æ –æ–±–Ω–æ–≤–∏–ª–∏ —Ü–µ–Ω—É
- üîÑ **"–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"** - —á–µ—Ä–µ–∑ API force-update

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞
- –í–≤–µ–¥–∏—Ç–µ –∞—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞
- –ü–æ–ª—É—á–∏—Ç–µ —Ü–µ–Ω—É (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–ª–∏ –Ω–æ–≤—É—é)

### API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—É –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
curl http://localhost:5000/api/sku/33069284/daily

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É
curl -X POST http://localhost:5000/api/sku/33069284/force-update

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
curl http://localhost:5000/api/stats
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ DailyPrices
- `sku_id` - ID —Ç–æ–≤–∞—Ä–∞
- `price` - –¶–µ–Ω–∞
- `price_source` - –ò—Å—Ç–æ—á–Ω–∏–∫ —Ü–µ–Ω—ã
- `price_date` - –î–∞—Ç–∞ (YYYY-MM-DD)
- `created_at` - –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏
- **UNIQUE(sku_id, price_date)** - –æ–¥–Ω–∞ —Ü–µ–Ω–∞ –≤ –¥–µ–Ω—å –Ω–∞ —Ç–æ–≤–∞—Ä

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤** - –Ω–µ –¥–µ–ª–∞–µ–º –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Ozon.ru
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–¥–∞—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω** - –º–æ–∂–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –¥–Ω—è–º
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –≤–∏–¥–∏–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

